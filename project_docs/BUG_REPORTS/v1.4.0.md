# Bug Report & Fix Plan: v1.4.1

**Version:** v1.4.1
**Status:** IN PROGRESS
**Last Updated:** November 7, 2025

---

## Overview

This document tracks the bug fixes targeted for the v1.4.1 patch release. The goal is to address critical and high-priority usability issues identified after the v1.4.0 release before beginning v1.5.0 feature work.

**Current Progress:** 2 of 3 targeted bugs have been resolved.

---

## ‚úÖ Resolved Issues (Session 39)

### **Issue #1: InfoModal Import Error (Critical üî¥)**

- **Status:** `[RESOLVED]`
- **Symptom:** Clicking the `</>` icon in the navbar crashed the application with a React error: "Element type is invalid".
- **Root Cause:** Mismatched default vs. named imports. `InfoModal.tsx` was importing child components (`Modal`, `ModalCloseButton`) using named import syntax, but those components were exported using `export default`.
- **Resolution:** Corrected the import statements in `InfoModal.tsx` to use default import syntax. Also fixed the `closeModal` prop wiring in `NewNavbar.tsx`.

### **Issue #2: Recent Races Date Overflow (High üü°)**

- **Status:** `[RESOLVED]`
- **Symptom:** On the dashboard, the date in the "Recent Races" list would wrap or overflow its container when the snippet title was very long.
- **Root Cause:** Incorrect flexbox container properties were allowing the title element to grow and compress the date element.
- **Resolution:** Applied `min-w-0` to the title's parent `div` and `flex-shrink-0` to the date's `div` using Tailwind CSS utilities, ensuring proper truncation and layout stability.

---

## üü° Remaining Issues

### **Issue #3: Dashboard Keyboard Shortcuts Broken (High üü°)**

- **Status:** `[IN PROGRESS]`
- **Symptom:** Game-specific keyboard shortcuts (Alt+Arrows for language change, Tab for refresh) are active globally. This causes runtime errors (`TypeError: nextLanguage is not a function`) and unwanted behavior on pages like `/dashboard`.
- **Root Cause Analysis:** The current implementation in `_app.tsx` is architecturally flawed. The global `useEffect` hook attempts to access the `game` object from the Zustand store. However, this `game` object is only instantiated by the typing page component, which mounts _after_ `_app.tsx`. Therefore, the event listener is created with a stale, `undefined` reference to `game`, leading to runtime errors when the shortcuts are triggered.
- **Next Steps / Proposed Fix:**
  1.  **Relocate the Logic:** Move the event listener logic for game-specific shortcuts (`Tab`, `Alt+Arrows`) out of the global `_app.tsx`.
  2.  **Co-locate with State:** Place the listener inside a component or hook that is part of the typing page's lifecycle (e.g., `useGame.ts` or `CodeTypingContainer.tsx`). This ensures the `game` object exists and is in scope when the listener is active.
  3.  **Keep Global Logic Global:** The `ESC` key handler for closing modals should remain in `_app.tsx` as it is a truly global concern.

---

## ‚è∏Ô∏è Deferred to Future Releases

### **Issue #4: Large Screen Layout (Medium üü¢)**

- **Status:** `[DEFERRED]`
- **Target Version:** `v1.4.2`
- **Description:** Margins are too small on large (24"+) monitors, and the main coding area is not centered, leading to poor ergonomics.

### **Issue #5: Stats Feature Requests (Medium üü¢)**

- **Status:** `[DEFERRED]`
- **Target Version:** `v1.5.0+`
- **Description:** User requests to enhance the dashboard statistics, such as limiting recent races to 5 and adding new metrics like "most mistyped characters".
